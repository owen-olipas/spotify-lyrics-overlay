<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Karaoke Overlay</title>
    <link rel="stylesheet" href="./dist/tailwind.css" />
  </head>
  <body class="app-drag m-0 select-none">
    <div class="app-drag bg-black/30 text-white text-sm font-medium py-4 rounded-2xl shadow-lg backdrop-blur-sm text-center">
      <div class=" items-center gap-2 text-center">
        <span>üéµ</span>
        <span id="track" class="truncate text-center">Waiting for song...</span>
      </div>
      <div class="text-white/80 italic" id="artist"></div>
      <div id="lyrics" class="mt-2 text-base text-white/90"></div>
    </div>

    <script>
        // This will work now with CommonJS preload
        console.log("electronAPI?", window.electronAPI);

        if (window.electronAPI) {
            window.electronAPI.onTrackUpdate((data) => {
                // console.log("üé§ Renderer got update:", data); // debug
                document.getElementById("track").textContent = data.track;
                document.getElementById("artist").textContent = data.artist || "";
            });


            window.electronAPI.onLyricsUpdate((lyricsData) => {
                const lyricsBox = document.getElementById("lyrics");
                lyricsBox.innerHTML = ""; // clear old lyrics

                if (lyricsData?.lyrics?.lines) {
                lyricsData.lyrics.lines.forEach((line) => {
                    const p = document.createElement("p");
                    p.textContent = line.words;
                    lyricsBox.appendChild(p);
                });
                } else {
                lyricsBox.textContent = "No lyrics found üò¢";
                }
            });

        } else {
            console.warn("‚ö†Ô∏è electronAPI not available. Check preload.js path.");
        }
    </script>

  </body>
</html>
